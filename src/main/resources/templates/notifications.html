<th:block th:with="active='notifications'"
          th:replace="~{layout :: base(~{::section})}">
    <section>
        <div class="d-flex justify-content-between align-items-center mb-3 notifications-header">
            <h1 class="h4 mb-0">Notifications</h1>
            <div class="text-muted small notifications-user">
                <span th:text="${me.fullName}">User</span>
            </div>
        </div>

        <!-- UNREAD SECTION -->
        <div th:if="${#lists.isEmpty(unread)}" class="alert alert-secondary small">
            No unread notifications.
        </div>

        <div th:if="${!#lists.isEmpty(unread)}" class="mb-4">
            <h2 class="h6 mb-2">Unread</h2>
            <div class="table-responsive">
                <table class="table table-sm align-middle notifications-table">
                    <thead>
                    <tr>
                        <!--<th>Type</th>-->
                        <th>Message</th>
                        <th class="notifications-action-col">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="n : ${unread}">
                        <!-- Friendly type: "TRADE_INVITE" -> "Trade invite" -->
                        <!--<td th:text="${#strings.capitalize(#strings.replace(n.type.toString().toLowerCase(), '_', ' '))}">
                            Type
                        </td>-->

                        <td th:text="${n.payload}">Notification text</td>
                        <td>
                            <form th:action="@{|/notifications/${n.id}/read|}" method="post" class="d-inline">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <button class="btn btn-sm btn-outline-secondary notification-action-btn">
                                    Mark as read
                                </button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- READ SECTION -->
        <h2 class="h6 mb-2">Previously read</h2>
        <div th:if="${#lists.isEmpty(read)}" class="text-muted small">
            No read notifications.
        </div>

        <div th:if="${!#lists.isEmpty(read)}" class="table-responsive">
            <table class="table table-sm align-middle notifications-table">
                <thead>
                <tr>
                    <!--<th>Type</th>-->
                    <th>Message</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="n : ${read}">
                    <!-- Friendly type -->
                    <!--<td th:text="${#strings.capitalize(#strings.replace(n.type.toString().toLowerCase(), '_', ' '))}">
                        Type
                    </td>-->

                    <td th:text="${n.payload}">Notification text</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</th:block>
